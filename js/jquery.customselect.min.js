(function($){$.fn.extend({customSelect:function(options){var defaults={resetAfterSelection:false,focusClass:'focus',consoleSelection:false};var that=this;var options=$.extend(defaults,options);function selectify(){that.each(function(){var o=options;var item=$(this).addClass('jq-custom');var itemData=$.parseJSON(item.data('customselect').replace(/([(A-Za-z0-9\$]+) *:/g,"\"$1\":").replace(/'/g,'"'));var itemKlass="";itemData.klass?itemKlass=" "+itemData.klass:itemKlass="";var selectWrap=item.wrap("<span class='jq-customselect"+itemKlass+"'></span>");var itemSelect=$("<span class='jq-selectchoice'>Select</span>");item.before(itemSelect);itemSelect[0].innerHTML=this.options[this.options.selectedIndex].text;item.change(function(){itemSelect[0].innerHTML=this.options[this.options.selectedIndex].text;if((itemData.consoleSelection||o.consoleSelection)&&console&&typeof console.info!="undefined"){var me=this.options[this.options.selectedIndex];console.info("my selection was: '"+me.text+"' and my value is: '"+me.value+"'")};if(itemData.resetAfterSelection||o.resetAfterSelection){this.selectedIndex=0;item.trigger('reset')}}).bind('keyup',function(){itemSelect[0].innerHTML=this.options[this.options.selectedIndex].text}).bind('focus',function(){item.parents('.jq-customselect').addClass(o.focusClass)}).bind('blur',function(){item.parents('.jq-customselect').removeClass(o.focusClass)}).bind('reset',function(){itemSelect[0].innerHTML=this.options[this.options.selectedIndex].text});item.trigger('reset')})}selectify()}})})(jQuery);